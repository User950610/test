<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>iStore | iPhone 17 & More</title>
    <style>
        :root {
            --bg-gray: #F5F5F7;
            --text-black: #1D1D1F;
            --text-gray: #86868B;
            --apple-blue: #0066CC;
            --white: #FFFFFF;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; font-family: "SF Pro Display", "Helvetica Neue", sans-serif; }
        body { background-color: var(--white); color: var(--text-black); overflow-x: hidden; }

        /* å°è¦½åˆ— */
        header {
            background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(20px);
            padding: 15px 50px; display: flex; justify-content: space-between;
            align-items: center; border-bottom: 1px solid #d2d2d7;
            position: sticky; top: 0; z-index: 1000;
        }
        .logo { font-size: 20px; font-weight: 600; cursor: pointer; }
        .nav-links span { margin-left: 25px; cursor: pointer; font-size: 14px; transition: 0.3s; }
        .nav-links span.active { color: var(--apple-blue); font-weight: 600; }

        /* é¦–é  Banner */
        #home-page { text-align: center; padding: 120px 20px; background: var(--bg-gray); transition: 0.5s; }
        .hero-title { font-size: 64px; font-weight: 600; margin-bottom: 15px; letter-spacing: -1px; }
        .hero-subtitle { font-size: 24px; color: var(--text-gray); margin-bottom: 40px; }
        .hero-btn { 
            background: var(--apple-blue); color: white; padding: 12px 35px; 
            border-radius: 30px; text-decoration: none; font-weight: 500; cursor: pointer; border: none; font-size: 16px;
        }

        /* å•†åº—å®¹å™¨ */
        .container { display: flex; max-width: 1200px; margin: 50px auto; padding: 0 20px; min-height: 600px; }
        aside { width: 220px; flex-shrink: 0; }
        aside h3 { font-size: 14px; color: var(--text-gray); margin-bottom: 25px; text-transform: uppercase; letter-spacing: 1px; }
        aside ul { list-style: none; }
        aside li { margin-bottom: 18px; cursor: pointer; font-size: 15px; transition: 0.2s; }
        aside li:hover { color: var(--apple-blue); }

        main { flex-grow: 1; margin-left: 60px; }
        .product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(260px, 1fr)); gap: 40px; }
        
        /* å•†å“å¡ç‰‡ */
        .product-card {
            background: var(--bg-gray); padding: 40px 20px; border-radius: 18px; text-align: center;
            transition: 0.4s ease; cursor: pointer;
        }
        .product-card:hover { transform: translateY(-10px); background: #eee; box-shadow: 0 20px 40px rgba(0,0,0,0.05); }
        .product-img { font-size: 60px; margin-bottom: 20px; display: block; }
        .product-name { font-size: 18px; font-weight: 600; margin-bottom: 10px; }
        .product-price-label { font-size: 14px; color: var(--text-gray); }

        /* å½ˆçª— Modal */
        .modal {
            display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.6); z-index: 2000; justify-content: center; align-items: center;
            backdrop-filter: blur(5px);
        }
        .modal-content {
            background: white; padding: 50px; border-radius: 30px; max-width: 800px; width: 90%;
            position: relative; display: flex; gap: 40px; align-items: center;
        }
        .close-btn { position: absolute; top: 25px; right: 30px; cursor: pointer; font-size: 28px; color: var(--text-gray); }
        .modal-info { flex: 1; }
        .modal-info h2 { font-size: 32px; margin-bottom: 15px; }
        .modal-desc { color: var(--text-gray); margin-bottom: 25px; line-height: 1.6; }
        
        .spec-label { font-size: 14px; font-weight: 600; margin-bottom: 10px; display: block; }
        .spec-select {
            width: 100%; padding: 12px; border-radius: 12px; border: 1px solid #d2d2d7;
            font-size: 16px; margin-bottom: 30px; outline: none; appearance: none;
            background: url('data:image/svg+xml;charset=US-ASCII,<svg%20xmlns%3D"http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg"%20width%3D"24"%20height%3D"24"%20viewBox%3D"0%200%2024%2024"><path%20fill%3D"gray"%20d%3D"M7%2010l5%205%205-5z"%2F><%2Fsvg>') no-repeat right 10px center;
        }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <header>
        <div class="logo" onclick="showHome()">iStore Select</div>
        <div class="nav-links">
            <span id="nav-home" class="active" onclick="showHome()">é¦–é </span>
            <span id="nav-iphone" onclick="switchPage('iPhone')">iPhone</span>
            <span id="nav-acc" onclick="switchPage('é…ä»¶')">å‘¨é‚Šé…ä»¶</span>
            <span style="font-weight: 600;">ğŸ›’ (<span id="cart-count">0</span>)</span>
        </div>
    </header>

    <section id="home-page">
        <h1 class="hero-title">iPhone 17 Pro</h1>
        <p class="hero-subtitle">éˆ¦é‡‘å±¬ï¼Œå¼·å¤§ç™»å ´ã€‚</p>
        <button class="hero-btn" onclick="switchPage('iPhone')">ç«‹å³é¸è³¼</button>
    </section>

    <div id="shop-container" class="container hidden">
        <aside id="sidebar"></aside>
        <main>
            <div class="product-grid" id="product-list"></div>
        </main>
    </div>

    <div id="product-modal" class="modal" onclick="closeModal()">
        <div class="modal-content" onclick="event.stopPropagation()">
            <span class="close-btn" onclick="closeModal()">Ã—</span>
            <div id="modal-img" style="font-size: 120px; flex: 0 0 200px; text-align: center;">ğŸ“±</div>
            <div class="modal-info">
                <h2 id="modal-name">ç”¢å“åç¨±</h2>
                <p id="modal-desc" class="modal-desc">ç”¢å“è©³ç´°æè¿°</p>
                
                <label class="spec-label">é¸æ“‡å„²å­˜å®¹é‡</label>
                <select id="modal-spec-select" class="spec-select" onchange="updateModalPrice()"></select>

                <div id="modal-price" style="font-size: 24px; font-weight: 600; margin-bottom: 30px;">NT$0</div>
                <button class="hero-btn" style="width: 100%;" onclick="addToCart();">åŠ å…¥è³¼ç‰©è»Š</button>
            </div>
        </div>
    </div>

    <script>
        // 1. è³‡æ–™åº« (i11 - i17 èˆ‡é…ä»¶)
        const db = {
            iphone: [
                { id: 171, name: "iPhone 17 Pro Max", series: "iPhone 17", desc: "å…¨æ–°éˆ¦é‡‘å±¬è¨­è¨ˆï¼Œé…å‚™ A19 Pro æ™¶ç‰‡ï¼Œæ”¯æ´æœ€å¼·å¤§çš„ç›¸æ©Ÿç³»çµ±ã€‚", specs: [{gb: "256GB", price: 44900}, {gb: "512GB", price: 51900}, {gb: "1TB", price: 58900}] },
                { id: 172, name: "iPhone 17 Pro", series: "iPhone 17", desc: "Pro ç´šæ•ˆèƒ½ï¼Œå®Œç¾å¹³è¡¡çš„å¤§å°èˆ‡æ‰‹æ„Ÿã€‚", specs: [{gb: "128GB", price: 36900}, {gb: "256GB", price: 40400}, {gb: "512GB", price: 47400}] },
                { id: 161, name: "iPhone 16 Pro", series: "iPhone 16", desc: "å“è¶Šçš„å½±ç‰‡æ‹æ”èƒ½åŠ›ï¼Œæ²™æ¼ éˆ¦é‡‘å±¬è‰²ç™»å ´ã€‚", specs: [{gb: "128GB", price: 36900}, {gb: "256GB", price: 40400}] },
                { id: 111, name: "iPhone 11", series: "iPhone 11", desc: "ç¶“å…¸è¶…å»£è§’é›™é¡é ­ï¼Œä¾ç„¶å¼·å¤§è¶…å€¼ã€‚", specs: [{gb: "64GB", price: 13900}, {gb: "128GB", price: 15500}] }
            ],
            accessories: [
                { id: 201, name: "MagSafe å……é›»å™¨", type: "power", desc: "ç£å¸å°ä½ï¼Œç„¡ç·šå……é›»å¿«å¦‚é–ƒé›»ã€‚", specs: [{gb: "æ¨™æº–è¦æ ¼", price: 1290}] },
                { id: 203, name: "AirPods Pro (ç¬¬2ä»£)", type: "audio", desc: "ä¸»å‹•å¼é™å™ªï¼Œæ‰“é€ æ²‰æµ¸å¼è†è½é«”é©—ã€‚", specs: [{gb: "USB-C ç‰ˆ", price: 7490}] }
            ]
        };

        // 2. åˆ‡æ›é¦–é èˆ‡å•†åº—
        function showHome() {
            document.getElementById('home-page').classList.remove('hidden');
            document.getElementById('shop-container').classList.add('hidden');
            setActiveNav('nav-home');
        }

        function switchPage(page) {
            document.getElementById('home-page').classList.add('hidden');
            document.getElementById('shop-container').classList.remove('hidden');
            setActiveNav(page === 'iPhone' ? 'nav-iphone' : 'nav-acc');
            renderSidebar(page);
            renderProducts(page, 'å…¨éƒ¨');
        }

        function setActiveNav(id) {
            document.querySelectorAll('.nav-links span').forEach(s => s.classList.remove('active'));
            document.getElementById(id).classList.add('active');
        }

        // 3. æ¸²æŸ“å´é‚Šæ¬„
        function renderSidebar(page) {
            const sidebar = document.getElementById('sidebar');
            if (page === 'iPhone') {
                const series = ["iPhone 17", "iPhone 16", "iPhone 11"];
                sidebar.innerHTML = `<h3>æ­·ä»£æ©Ÿå‹</h3><ul><li onclick="renderProducts('iPhone', 'å…¨éƒ¨')">æ‰€æœ‰ iPhone</li>${series.map(s => `<li onclick="renderProducts('iPhone', '${s}')">${s} ç³»åˆ—</li>`).join('')}</ul>`;
            } else {
                sidebar.innerHTML = `<h3>é¡åˆ¥</h3><ul><li onclick="renderProducts('é…ä»¶', 'å…¨éƒ¨')">å…¨éƒ¨é…ä»¶</li><li onclick="renderProducts('é…ä»¶', 'power')">é›»æº</li><li onclick="renderProducts('é…ä»¶', 'audio')">éŸ³è¨Š</li></ul>`;
            }
        }

        // 4. æ¸²æŸ“å•†å“æ¸…å–®
        function renderProducts(page, filter) {
            const list = document.getElementById('product-list');
            let data = page === 'iPhone' ? db.iphone : db.accessories;
            if (filter !== 'å…¨éƒ¨') {
                data = data.filter(p => p.series === filter || p.type === filter);
            }
            list.innerHTML = data.map(p => `
                <div class="product-card" onclick="openModal(${p.id}, '${page}')">
                    <span class="product-img">${page === 'iPhone' ? 'ğŸ“±' : 'ğŸ”Œ'}</span>
                    <div class="product-name">${p.name}</div>
                    <div class="product-price-label">èµ·åƒ¹ NT$${p.specs[0].price.toLocaleString()}</div>
                </div>
            `).join('');
        }

        // 5. å½ˆçª—é‚è¼¯ (å®¹é‡èˆ‡åƒ¹æ ¼é€£å‹•)
        function openModal(id, page) {
            const data = page === 'iPhone' ? db.iphone : db.accessories;
            const p = data.find(item => item.id === id);
            
            document.getElementById('modal-name').innerText = p.name;
            document.getElementById('modal-desc').innerText = p.desc;
            document.getElementById('modal-img').innerText = page === 'iPhone' ? 'ğŸ“±' : 'ğŸ”Œ';
            
            // å¡«å……å®¹é‡é¸é …
            const select = document.getElementById('modal-spec-select');
            select.innerHTML = p.specs.map(s => `<option value="${s.price}">${s.gb}</option>`).join('');
            
            updateModalPrice();
            document.getElementById('product-modal').style.display = 'flex';
        }

        function updateModalPrice() {
            const price = parseInt(document.getElementById('modal-spec-select').value);
            document.getElementById('modal-price').innerText = "NT$ " + price.toLocaleString();
        }

        function closeModal() { document.getElementById('product-modal').style.display = 'none'; }

        function addToCart() {
            const count = document.getElementById('cart-count');
            count.innerText = parseInt(count.innerText) + 1;
            alert("å·²æˆåŠŸåŠ å…¥è³¼ç‰©è»Šï¼");
            closeModal();
        }

        showHome(); // åˆå§‹é¡¯ç¤ºé¦–é 
    </script>
</body>
</html>